---
import Base from './Base.astro';
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';

interface Props {
  title: string;
  date: Date;
  author: string;
  tags: string[];
  description: string;
}

const { title, date, author, tags, description } = Astro.props;
const formattedDate = date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
---
<Base title={`${title} â€” Arithmos`} description={description}>
  <Nav />
  <main class="container" style="padding-top: 2rem; padding-bottom: var(--section-gap);">
    <a href="/blog" class="back-link">&larr; Back to blog</a>
    <article class="post">
      <header class="post-header">
        <time class="post-date mono muted" datetime={date.toISOString()}>{formattedDate}</time>
        <h1>{title}</h1>
        <div class="post-meta">
          <span class="muted">by {author}</span>
          <div class="post-tags">
            {tags.map(tag => <span class="tag">{tag}</span>)}
          </div>
        </div>
      </header>
      <div class="prose">
        <slot />
      </div>
    </article>
  </main>
  <Footer />
</Base>

<style>
  .back-link {
    display: inline-block;
    color: var(--text-muted);
    font-size: 0.9rem;
    margin-bottom: 2rem;
    transition: color 0.2s ease;
  }
  .back-link:hover {
    color: var(--accent-purple);
  }
  .post-header {
    margin-bottom: 3rem;
  }
  .post-header h1 {
    margin: 0.5rem 0 1rem;
  }
  .post-date {
    font-size: 0.85rem;
  }
  .post-meta {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex-wrap: wrap;
  }
  .post-tags {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }
</style>
